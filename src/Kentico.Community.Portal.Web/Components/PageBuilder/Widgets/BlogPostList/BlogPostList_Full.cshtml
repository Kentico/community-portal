@using Kentico.Community.Portal.Web.Components.PageBuilder.Widgets.BlogPostList
@using Kentico.Community.Portal.Web.Features.Blog

@model BlogPostListWidgetViewModel

<div xpc-preview-outline="@Model.ComponentName">
    @if (Model.Heading.TryGetValue(out string? heading))
    {
        <h3>@heading</h3>
    }

    @foreach (var post in Model.BlogPosts)
    {
        <article class="border rounded-3 p-4 mt-3 blog-post-card" aria-label="Blog post: @post.Title">
            <div class="text-center mb-3">
                <partial name="~/Features/Blog/_BlogHero.cshtml" />
            </div>

            <header class="mb-3">
                <h3 class="h3 mb-2">@post.Title</h3>
                <div class="small text-muted mb-2">
                    <time datetime="@post.PublishedDate.ToString("yyyy-MM-dd")">@post.PublishedDate.ToString("d",
                                            View.Culture)</time>
            </div>
            <div class="small text-muted">
                by
                @if (post.Author.ID > 0)
                    {
                        <a asp-controller="Member" asp-action="MemberDetail" asp-route-memberID="@post.Author.ID"
                            class="text-decoration-none">@post.Author.Name</a>
                    }
                    else
                    {
                        @post.Author.Name
                    }
                </div>
            </header>

            <div class="mb-3">
                <p class="mb-0">@post.ShortDescription</p>
            </div>

            <footer>
                <a class="btn btn-outline-primary btn-sm d-inline-flex align-items-center" href="@post.LinkPath">
                    Read More
                    <svg class="ms-2" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
                        <use xlink:href="/img/icons.svg#chevron-right" asp-append-version></use>
                    </svg>
                </a>
            </footer>
        </article>
    }
</div>