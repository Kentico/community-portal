@using Kentico.Community.Portal.Core.Modules.Membership
@model Kentico.Community.Portal.Web.Components.PageBuilder.Widgets.ProfileCard.ProfileCardWidgetViewModel

<article class="profile-card" xpc-preview-outline="@Model.ComponentName" aria-label="Profile: @Model.DisplayName">
    <div class="profile-card__container">
        <div class="profile-card__header">
            <div class="profile-card__avatar-wrapper">
                @if (Model.Photo.TryGetValue(out var photo))
                {
                    <img src="" class="profile-card__avatar" xpc-image="photo" alt="@Model.DisplayName">
                }
                else if (Model.Member.TryGetValue(out var member))
                {
                    <img src="" class="profile-card__avatar" xpc-member-avatar="member.Id" alt="@member.DisplayName">
                }
                @if (Model.MemberBadges.Any())
                {
                    <div class="profile-card__badges d-flex align-items-center justify-content-center gap-2">
                        @foreach (var badge in Model.MemberBadges)
                        {
                            if (badge.BadgeImageUrl.TryGetValue(out var imageUrl))
                            {
                                <img src="@imageUrl" class="profile-card__badge-icon" alt="@badge.MemberBadgeDisplayName"
                                    title="@badge.MemberBadgeDescription" />
                            }
                        }
                    </div>
                }
            </div>
        </div>

        <div class="profile-card__body">
            <div class="profile-card__content text-center">
                <h3 class="profile-card__name fw-bold">@Model.DisplayName</h3>

                @if (Model.ProfileHTML.TryGetValue(out var html))
                {
                    <div class="profile-card__bio text-start">
                        @html
                    </div>
                }
                else if (Model.Member.TryGetValue(out var member2))
                {
                    <div class="profile-card__meta d-flex flex-column gap-2 text-start">
                        @if (Model.CommunityProgramBadge.TryGetValue(out var programBadge))
                        {
                            <div class="profile-card__meta-item d-flex align-items-start gap-2">
                                <svg class="profile-card__meta-icon" width="20" height="20" fill="currentColor"
                                    viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                        d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                        clip-rule="evenodd" />
                                </svg>
                                <span>@programBadge.MemberBadgeDisplayName</span>
                            </div>
                        }

                        <div class="profile-card__meta-item d-flex align-items-start gap-2">
                            <svg class="profile-card__meta-icon" width="20" height="20" fill="currentColor"
                                viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z"
                                    clip-rule="evenodd" />
                                <path
                                    d="M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z" />
                            </svg>
                            <span>
                                @member2.JobTitle
                                @if (member2.EmployerLink.HasValue)
                                {
                                    <text> at </text>

                                    <a href="@member2.EmployerLink.URL" rel="noopener nofollow"
                                        class="profile-card__link fw-medium text-decoration-none">@member2.EmployerLink.Label</a>
                                }
                            </span>
                        </div>

                        <div class="profile-card__meta-item d-flex align-items-start gap-2">
                            <svg class="profile-card__meta-icon" width="20" height="20" fill="currentColor"
                                viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                                    clip-rule="evenodd" />
                            </svg>
                            <span>@member2.Country</span>
                        </div>
                    </div>
                }
            </div>

            @if (Model.Member.TryGetValue(out var member3))
            {
                <div class="profile-card__actions d-flex flex-column gap-2">
                    <a href="/member/@member3.Id"
                        class="btn btn-primary d-flex align-items-center justify-content-center gap-2 fw-semibold text-decoration-none text-uppercase">
                        <svg class="profile-card__button-icon" width="18" height="18" fill="currentColor"
                            viewBox="0 0 20 20">
                            <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" />
                        </svg>
                        Profile
                    </a>

                    @if (!string.IsNullOrWhiteSpace(member3.LinkedInIdentifier))
                    {
                        <a href="https://www.linkedin.com/in/@member3.LinkedInIdentifier" rel="noopener nofollow"
                            class="btn btn-outline-secondary d-flex align-items-center justify-content-center gap-2 text-decoration-none text-uppercase">
                            <svg class="profile-card__button-icon" width="18" height="18" fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                            </svg>
                            Connect
                        </a>
                    }
                </div>
            }
        </div>
    </div>
</article>