<?xml version="1.0" encoding="utf-8"?>
<kenticocommunity.qandaanswerdata>
  <QAndAAnswerDataAuthorMemberID>
    <GUID>46b28c7b-3654-4262-ae46-99cee1b97aa6</GUID>
    <ObjectType>cms.member</ObjectType>
  </QAndAAnswerDataAuthorMemberID>
  <QAndAAnswerDataCodeName>I-think-you-want-to-use-the-Linking-Contene825c2db</QAndAAnswerDataCodeName>
  <QAndAAnswerDataContent>
<![CDATA[
I think you want to use the `.Linking()` [Content item query method](https://docs.kentico.com/documentation/developers-and-admins/api/content-item-api/reference-content-item-query#linking-2).

Your code would look something like this...

```CSharp
var eventIds = (await executor.GetMappedResult<Entities.Event>(
    new ContentItemQueryBuilder().ForContentType(Entities.Event.CONTENT_TYPE_NAME, config => config
        .Linking(nameof(Entities.Event.EventRegion), [region.SystemFields.ContentItemGUID])
        .Columns("ContentItemID")
    ),
    options: new ContentQueryExecutionOptions { ForPreview = true },
    cancellationToken: cancellationToken
    ))
    .Select(e => e.SystemFields.ContentItemID)
    .ToList();
```

The `Linking()` method here is saying "Give me all `Event` content items that link to the `Region` content items in the collection `[region.SystemFields.ContentItemGUID]` from the field `Event.EventRegion`.

However, I would recommend using [the newer ContentRetriever API](https://docs.kentico.com/x/content_retriever_api_xp), which went from preview to production-ready [in June's Refresh](https://community.kentico.com/blog/xperience-by-kentico-refresh-june-12-2025#production-ready-content-retriever).

Using that API you can still perform the same `.Linking()` query but it will handle caching, mapping, preview context, etc... for you.

***

An additional note: You can avoid the awkward requirement to specify the namespace every time you refer to the `Event` type by not using a name for a content type that is likely going to be used by someone else's code (external library, .NET, ASPNET Core).

Instead give the `Event` content type name a bit more [domain context](https://martinfowler.com/bliki/BoundedContext.html) and name it something like "BusinessEvent", "CorporateEvent", "RegionalEvent" (since each event is in a specific region(s)).
]]>
  </QAndAAnswerDataContent>
  <QAndAAnswerDataDateCreated>2025-08-19 02:06:32Z</QAndAAnswerDataDateCreated>
  <QAndAAnswerDataGUID>e1054986-9fda-4b05-b339-080867ca9fd2</QAndAAnswerDataGUID>
  <QAndAAnswerDataQuestionWebPageItemID>
    <CodeName>How-to-use-content-query-API-where-clause-on-nested-content-items-e8795c1a-cqdpikz2</CodeName>
    <GUID>dfee5ce8-0336-4058-be12-905b18951cb1</GUID>
    <ObjectType>cms.webpageitem</ObjectType>
  </QAndAAnswerDataQuestionWebPageItemID>
  <QAndAAnswerDataWebsiteChannelID>
    <GUID>9ca57e0f-969f-43be-91d3-6c45659316bd</GUID>
    <ObjectType>cms.websitechannel</ObjectType>
    <Parent>
      <CodeName>devnet</CodeName>
      <GUID>4f636110-fd4a-4905-83e6-998752c2b2c2</GUID>
      <ObjectType>cms.channel</ObjectType>
    </Parent>
  </QAndAAnswerDataWebsiteChannelID>
</kenticocommunity.qandaanswerdata>